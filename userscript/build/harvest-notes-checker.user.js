/*!
 * // ==UserScript==
 * // @name         harvest-notes-checker
 * // @namespace    http://tampermonkey.net/
 * // @version      0.2.2
 * // @description  Browser extension that checks Harvest's detailes reports for incomplete, short or empty notes
 * // @author       Mobile Jazz
 * // @match        *://*.harvestapp.com/reports/detailed*
 * // @grant        none
 * // ==/UserScript==
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="#008000",c="#FF0000",l="#FFA500",i="#FFD700";new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"resultsBoxId","harvest-notes-checker"),r(this,"harvestSummaryElementId","dtr-summary"),r(this,"harvestEntryTimeSelector","tr.entry-has-notes td:last-child"),r(this,"harvestEntryNotesSelector","tr.entry-notes td:last-child p"),r(this,"harvestTableRowSelector","#dtr-table tbody tr"),window.addEventListener("load",function(){t.init()})}var t,s,a;return t=e,(s=[{key:"init",value:function(){this.initResultsBox(),this.checkAndDisplay()}},{key:"initResultsBox",value:function(){document.getElementById(this.harvestSummaryElementId).insertAdjacentHTML("beforeend",'<div id="'.concat(this.resultsBoxId,'" class="span-16"></div>'))}},{key:"checkAndDisplay",value:function(){var e=this.checkForLongTimers(),t=this.checkForSmallNotes(),n=this.checkForEmptyNotes(),r=['<ul style="display: inline-block;">',"</ul>"];if(!t&&!n&&!e){var s='<li><strong style="color:'.concat(o,';">All good</strong></li>');r.splice(-1,0,s)}if(n){var a='<li><strong style="color:'.concat(c,';">').concat(n," note").concat(n>1?"s are":" is"," empty</strong></li>");r.splice(-1,0,a)}if(t){var u='<li><strong style="color:'.concat(l,';">').concat(t," note").concat(t>1?"s are":" is"," too short</strong></li>");r.splice(-1,0,u)}if(e){var f='<li><strong style="color:'.concat(i,';">').concat(e," entr").concat(e>1?"ies are":"y is"," longer than 4h</strong></li>");r.splice(-1,0,f)}document.getElementById(this.resultsBoxId).innerHTML='<span style="margin-right: 15px;">Notes check</span>'.concat(r.join(""))}},{key:"checkForSmallNotes",value:function(){var e=0;return document.querySelectorAll(this.harvestEntryNotesSelector).forEach(function(t){t.innerHTML.length<=4&&(t.closest("tr").style.background=l,t.closest("tr").previousElementSibling.style.background=l,e++)}),e}},{key:"checkForEmptyNotes",value:function(){var e=0;return document.querySelectorAll(this.harvestTableRowSelector).forEach(function(t){t.classList.length||(t.style.background=c,e++)}),e}},{key:"checkForLongTimers",value:function(){var e=0;return document.querySelectorAll(this.harvestEntryTimeSelector).forEach(function(t){parseFloat(t.innerHTML)>=4&&(t.closest("tr").style.background=i,t.closest("tr").nextElementSibling.style.background=i,e++)}),e}}])&&n(t.prototype,s),a&&n(t,a),e}())}]);